### 9663번: N-Queen

1. **문제 사이트** : [바로가기](https://www.acmicpc.net/problem/9663)
2. **도움 블로그** : https://hagisilecoding.tistory.com/46

**문제 조건**
- 크기가 N X N인 체스판 위에 퀸을 배치하고자 함.
- 체스판 위에 있는 퀸들은 서로 공격할 수 없게 배치해야 함.

**출력**  
- 퀸 N개를 N X N인 체스판 위에 **서로 공격할 수 없게 놓는 경우의 수**를 출력

### 풀이
1. 퀸은 자기 주변의 8칸 주위를 전부 공격하는 체스말
2. 단순하게, 퀸을 놓고 공격당하는 칸들을 조사 후, 놓을 수 있는 칸에 퀸을 놓는 방식을 하면은 시간 초과 발생
3. 퀸의 공격 특성을 이용하여 시간 제한안에 풀어야 함.
4. 퀸의 공격은 행과 열 그리고 대각선으로 공격
5. 퀸은 행과 열을 공격하므로 각 행마다 서로 열이 겹치지 않는 곳에 1개씩 배치 해야 함
6. 또한 퀸은 대각선으로 공격하는데 이때 대각선 공격당하는 것을 특정 공식으로 알 수 있음
7. 서로의 퀸의 좌표 $(a_1, b_1), (a_2, b_2)$ 일 때 $|b_2 - b_1| == a_2 - b_2$ 를 확인하면 공격 당하는지 알 수 있음
8. 위 방식으로 모든 경우의 수를 확인하여 문제 조건을 만족하는 경우의 수 일 때 1씩 증가시켜 최종적인 값을 출력

### 핵심 코드

<details>
<summary>코드 보기</summary>

```py
def back(x, col):
    global ans

    if x == n:
        ans += 1
        return

    for i in range(n):
        col[x] = i
        chk = True
        
        for j in range(x):
            if col[x] == col[j] or abs(col[x] - col[j]) == x - j:
                chk = False
                break
        
        if chk:
            back(x + 1, col)
```
- `back()`로 재귀적으로 탐색진행 하며, `x`는 퀸의 개수, `col`은 각 행에서 퀸의 위치를 저장
- `x`가 `n`개가 되었을 때 문제 조건을 만족하는 것이므로 `ans` 값을 1 증가
- `x`번째 행에서 `i`번째 열에 퀸을 놓음
- 해당 칸에 퀸을 놓을 수 있을지 판단하는 `chk`
- 현재 놓는 행보다 **위쪽 행들을 퀸**을 확인
- 위쪽 행들에 놓여 있는 퀸이 현재 퀸이 있는 열과 겹치는지 확인
- 또는, 대각선으로 이미 위쪽에 놓은 퀸들과 **대각선으로 공격**하는지 확인
- 서로 공격하지 않는다면, 다음 행으로 탐색 진행하고 공격한다면 `chk`값을 `False`로 저장하여 현재 퀸을 다음 열로 이동시켜서 조사
- 위 과정들을 모든 경우의 수를 탐색할 때까지 진행 후 최종적으로 구한 `ans` 값에는 문제 조건에 만족하는 **경우의 수**가 됨.
</details>

### 후기
- 단순하게 행과 열만 공격한다면 간단하게 할 수 있지만 대각선을 공격하는 공식을 생각하는 것을 매우 어려움.
- 1799번의 비숍과 비슷한 듯하면서 미묘하게 다른 문제