### 17070번: 파이프 옮기기 1

1. **문제 사이트** : [바로가기](https://www.acmicpc.net/problem/17070)
2. **도움 블로그** : 
		- DFS : https://nanyoungkim.tistory.com/183
		- DP : [https://velog.io/@eunseokim/BOJ-17070번-파이프-옮기기-1-dp-풀이-python](https://velog.io/@eunseokim/BOJ-17070%EB%B2%88-%ED%8C%8C%EC%9D%B4%ED%94%84-%EC%98%AE%EA%B8%B0%EA%B8%B0-1-dp-%ED%92%80%EC%9D%B4-python)

**문제 조건**
- 새 집의 크기는 N X N의 격자판으로 나타낼 수 있고, 1 X 1 크기의 정사각형 칸으로 나뉘어짐
- 각각의 칸은 빈 칸이거나 벽으로, 빈 칸에 연속으로 있을 시에 파이프를 놓을 수 있음
- 파이프는 3가지 방향이 존재(가로, 세로, 대각선)
- 파이프를 놓을 때 필요한 빈 칸은 가로, 세로는 **2칸**씩이나 대각선의 경우 **4칸**의 정사각형의 빈 칸이 필요
- 각각의 파이프를 놓을 때 **이전 파이프**의 모양의 영향을 받음
    - 가로를 놓을 경우 이전 파이프 모양이 가로, 대각선
    - 세로를 놓을 경우 이전 파이프 모양이 세로, 대각선
    - 대각선을 놓을 경우 이전 파이프 모양과 관계 없이 놓을 수 있음
- 가장 처음 파이프는 (1, 1)과 (1, 2)를 차지하고, 파이프들을 연결해서 (N, N)으로 이동하고자 함

**출력**  
- 처음의 파이프 한쪽 끝을 시작으로 (N, N)으로 이동시킬 수 있는 **방법의 수**를 출력

### 풀이
1. (1, 2) 위치에서 파이프를 시작해서 _DFS_ 을 이용하여 (N, N) 위치까지의 방법의 수들을 찾음
2. 가로, 대각선, 세로의 파이프 이동은 `dx`, `dy`의 값으로 이동
3. 다음 파이프를 놓을 때 현재 파이프 상태를 보고 사용 **못하는 파이프**들은 건너뜀
    1. 다음 파이프가 가로일 때, 현재 파이프가 세로인 경우
    2. 다음 파이프가 세로일 때, 현재 파이프가 가로인 경우
    3. 다음 파이프가 대각선일 때, 정사각형 4칸이 빈 칸이 아닌 경우
4. 파이프를 놓으면서 집에 놓을 수 있는 크기인지 확인
5. 위 과정들을 반복하여 깊이 탐색을 하면서 (N, N)에 도달할 때 방법의 수들을 1씩 증가
6. 최종적으로 구한 **최종 방법의 수**를 출력


### 핵심 코드

<details>
<summary>코드 보기</summary>

```cpp
void dfs(int x, int y, int pipe) {
    if(x == n - 1 && y == n - 1) {
        ans++;
        return;
    }
    
    for(int i = 0; i < 3; i++) {
        if(pipe == 0 && i == 2) continue;
        else if(pipe == 2 && i == 0) continue;
        else if(i == 1 && (home[x + 1][y] || home[x][y + 1])) continue;
        
        int nx = x + dx[i];
        int ny = y + dy[i];
        
        if(nx >= 0 && nx < n && ny >= 0 && ny < n && !home[nx][ny]) {
            dfs(nx, ny, i);
        }
    }
}
```
- `dfs()`에 현재 행과 열과 파이프 상태를 나타내는 `x`, `y`, `pipe`
- 현재 `x`, `y` 값이 파이프의 끝에 도착했을 경우 방법의 개수인 `ans`를 1씩 증가
- 다음 파이프로 갈 수 있는 것은 3가지로 0은 가로, 1은 대각선, 2는 세로를 나타냄
- 각각 다음 파이프가 가로, 세로일 때 현재 파이프 상태가 세로, 가로일 경우 이을 수 없으므로 건너뜀
- 다음 파이프가 대각선일 때 현재 칸 기준으로 `home[x + 1][y]`, `home[x][y + 1]`값도 빈칸인지 확인
- 다음 파이프의 끝 부분이 집 안인지 확인하며 벽이 아닌지도 확인하여 위 과정들을 **깊이 탐색** 진행
- 위 과정들을 탐색하면은 최종적으로 `ans` 값에는 총 이동시킬 수 있는 방법의 수의 개수가 저장
</details>

### 후기
- 파이프가 대각선일 때 나머지 칸의 유무를 체크 하지 않았음
- _DP_ 방식으로는 py으로 풀음 각 칸에 도달할 수 있는 파이프의 개수들을 구해서, 최종 마지막 칸의 **각 종류의 파이프 개수의 합산**을 통해 구할 수도 있음