### 3055번: 탈출

1. **문제 사이트** : [바로가기](https://www.acmicpc.net/problem/3055)
2. **도움 블로그** : 

**문제 조건**
- 티떱숲의 지도는 R행 C열로 이뤘으며 비어있는 곳은 '.', 물이 시작하는 지역 '*', 돌은 'X'로 표시
- 비버의 굴은 'D', 고슴도치의 위치는 'S'로 나타내며 고슴도치가 비버의 굴로 갈려고 함
- 매 분마다 고슴도치는 상하좌우로 한 칸씩 이동할 수 있으며, 물도 상하좌우로 확장
- 물은 비어져있는 곳만 이동이 가능하며, 고슴도치도 마찬가지나 비버의 굴은 갈 수 있음
- 고슴도치는 물이 찰 예정인 칸에 이동할 수 없음

**출력**  
- 고슴도치가 비버의 굴로 이동할 수 있는 **가장 빠른 시간**을 출력, 만약 이동할 수 없다면 **"KAKTUS"** 출력

### 풀이
1. 먼저 티떱숲에 홍수가 일어날 수 있는 상황을 각 칸에 몇분인지를 저장
2. 홍수가 시작할 수 있는 위치는 여러 개일 수 있으므로 BFS를 활용하여 각 칸에 시작
3. 그 후, 고슴도치의 위치를 0과 비버의 굴의 위치를 MAX(=10001) 값으로 시작하여 각 칸에 갈 수 있는지를 확인
4. 고슴도치의 위치의 값이 해당 홍수가 일어날 칸의 수보다 작다면은 해당 시간에서는 고슴도치가 이동할 수 있는 것이므로 해당 칸을 갱신
5. 고슴도치의 위치도 BFS를 통해 각 이동 가능한 시간을 기록하며 확인
6. 비버의 굴의 위치가 MAX값과 비교하여 다르면은 해당 칸에 고슴도치가 도착한 것이므로 해당 시간을 출력  
_MAX 값은 10001 이다. 딱히 큰 의미는 없고 티떱숲에 50 X 50이 최대 크기이니 2500보다 임의의 큰 수로 한 것_
7. 비버의 굴의 위치가 MAX값과 같다면은 홍수가 나서 고슴도치가 도착할 수 없는 것이므로 "KAKTUS"를 출력

### 핵심 코드

<details>
<summary>코드 보기</summary>

```cpp
void solve() {
    for (auto &it : flow) {
        dist[it.X][it.Y] = 0;
        Q.push(it);
    }
    bfs(true);
    
    dist[s_c.X][s_c.Y] = 0;
    Q.push(s_c);
    bfs(false);

    int res = dist[d_c.X][d_c.Y];
    
    if (res == MAX) cout << "KAKTUS" << '\n';
    else cout << res << '\n';
}
```
- 초기 `dist` 값에는 전부 `MAX` 값이 저장되어 있다.
- `flow`에는 물의 시작 위치 값이 저장되어 있어 해당 위치 값에 0을 저장
- `Q`에 해당 좌표 값들을 추가한 후에 `bfs(true)`로 홍수 상태일 떄의 티떱숲의 시간을 저장하도록 함
- `bfs`에서 `true`를 넣은 이유는 **홍수 상태일 때는 비버의 굴의 위치를 건들이면 안되기 때문**에 따로 bool 값을 대입

```cpp
void bfs(bool is_water) {
    while(!Q.empty()) {
        pair<int, int> cur = Q.front(); Q.pop();
        
        for(int i = 0; i < 4; i++) {
            int nx = cur.X + dx[i];
            int ny = cur.Y + dy[i];
            
            if(nx < 0 || nx >= r || ny < 0 || ny >= c) continue;
            if((is_water && forest[nx][ny] == 'D') ||
                forest[nx][ny] == 'X' || dist[nx][ny] <= dist[cur.X][cur.Y] + 1) continue;

            dist[nx][ny] = dist[cur.X][cur.Y] + 1;
            Q.push({nx, ny});
        }
    }
}
```
- `bfs()`에서 `is_water` 매개값이 있는 이유는 홍수상태일 때는 비버의 굴인 `D`의 위치를 홍수로 덮어버리면 안되기 떄문
- 일반적인 `bfs()` 함수와 동일하며 `dist[nx][ny]` 값과 현재 위치 값 + 1 값과 비교하여 **더 낮을 때**만 Q에 추가하도록 함

</details>

### 후기
- queue에서 flow의 위치를 처음부터 다 넣어도 동일한 결과가 나온다는 것을 깨달음  
_즉, 물의 위치를 넣고 bfs돌리고 다음 위치해서 bfs보단, 처음부터 넣을때 물 위치를 다 넣어도 동일하다는 것_
