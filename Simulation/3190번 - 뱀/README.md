### 3190번: 뱀

1. **문제 사이트** : [바로가기](https://www.acmicpc.net/problem/3190)
2. **도움 블로그** : https://dvpzeekke.tistory.com/80

**문제 조건**
- 뱀이 나와서 기어다니는데, 사과를 먹으면 뱀 길이가 늘어남.
- 뱀이 이리저리 기어다니다가 벽 또는 자기자신의 몸과 부딪히면 게임 종료
- 게임은 N x N 정사각 보드 위에서 진행되고, 몇몇 칸에는 사과가 놓여져 있음.
- 보드의 상하좌우 끝에 벽이 있고, 게임 시작할 때 뱀은 맨위 맨좌측에 위치하고 뱀의 길이는 1
- 뱀의 처음 방향은 오른쪽으로 시작
- 뱀은 다음 규칙을 따름
    - 뱀은 몸길이를 늘려 머리를 다음칸에 위치
    - 만약 벽이나 자기자신의 몸과 부딪히면 게임 종료
    - 만약 이동한 칸에 사과가 있다면, 그 칸에 있던 사과가 없어지고 꼬리는 움직이지 않음
    - 만약 이동한 칸에 사과가 없다면, 몸길이를 줄여서 꼬리가 위치한 칸을 비워둠.(즉, 몸길이는 변하지 않음)

**출력**  
- 뱀의 이동경로를 주어질 때 이 게임이 몇 초에 끝나는지 출력

### 풀이
1. 구현해야 하는 문제로 꽤 까다로운 문제
2. 준비해야 하는 것은 사과의 위치를 저장과 뱀의 위치를 저장, 방향과 시간에 따른 방향 전환
3. 2차원 배열을 통해서 사과의 위치와 뱀의 위치를 저장할 각각의 보드를 선언
4. 뱀이 이동하는 것은 _Queue_ 를 통해서 이동하며 다음 칸에 사과가 있는지 확인하여 _Queue_ 에서 뺄지 말지를 파악
5. 뱀이 있는 칸은 보드에서 따로 표시를 해놓으며, 뱀이 이동할 때 보드 내에 있는지, 또는 자신의 몸에 부딪히는지 파악
6. 방향 전환이 되는 시간이 되면, 그에 맞게 방향 전환
7. 위 과정들을 뱀이 죽을 때 까지 반복하며, 종료 시에 시간을 출력

### 핵심 코드

<details>
<summary>코드 보기</summary>

```cpp
void solve() {
    // 뱀의 위치 및 방향
    int x = 1, y = 1;
    int dir = 0;
    int sec = 0;
    
    // 뱀의 몸과 맵에서의 뱀
    board[1][1] = 1;
    queue<pair<int, int> > snake;
    snake.push({1, 1});
    
    while(1) {
        x += dx[dir];
        y += dy[dir];
        sec++;

        // 맵 밖으로 나가거나 몸을 부딪힘
        if(x <= 0 || x > n || y <= 0 || y > n || board[x][y]) break;
        
        // 머리 옮기기
        snake.push({x, y});
        board[x][y] = 1;
        
        // 사과가 있는지 확인
        if(apple[x][y]) {
            apple[x][y] = 0;
        }
        else {
            pair<int, int> tail = snake.front();
            board[tail.X][tail.Y] = 0;
            snake.pop();
        }
        
        // 맵에서의 뱀 이동하는 것 보기
        // show();
        
        int move_cnt = moves.front().X;
        int turn = (moves.front().Y == 'D' ? 1 : -1);
        if(sec == move_cnt) {
            dir = ((dir + turn + 4) % 4);
            moves.pop();
        }
    }
    
    cout << sec << '\n';
}
```
- 처음위치인 `x`, `y`와 방향 `dir`, 현재 게임의 경과 시간인 `sec` 선언
- `board[][]`에 현재 뱀의 위치를 저장한 후에, 다음 위치들을 저장할 `Queue`
- 게임이 종료할 때 까지 반복임으로 `while` 반복문을 사용하고, 맵 밖으로 가는지 또는 자기 자신과 부딪히는지 확인
- 다음 칸에 사과일 경우 해당칸에 뱀을 위치시키고, 없으면은 이동 후 꼬리부분을 없앰
- 현재 경과시간이 방향전환을 해야할 시간인 `move_cnt`에 도달할 경우, `turn`을 확인해서 다음 방향으로 수정
- 방향 전환이 됐으므로 `moves`의 해당 방향 전환은 제거
</details>

### 후기
- 구현하는게 너무 힘듬. 
- 방향 계산과 마지막 턴 후 계속해서 무한으로 이동해야 한다는 것이 핵심