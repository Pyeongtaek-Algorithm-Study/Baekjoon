### 11660번: 구간 합 구하기

1. **문제 사이트** : [바로가기](https://www.acmicpc.net/problem/11660)
2. **도움 블로그** : https://donggoolosori.github.io/2020/10/13/boj-11660/

**문제 조건**
- **N X N**개의 크기의 표가 각 칸에 해당 숫자가 적혀있다.
- 첫쨰 줄에는 표의 크기인 `N`과 합을 구해야 하는 횟수 `M`을 입력
- 그 다음줄 부터는 표의 크기만큼을 입력값을 받음
- `M`의 횟수만큼 시작 좌표와 종료 좌표를 입력 받음

**출력**  
- 각 줄에서 `x1`, `y1`, `x2`, `y2` 값을 입력받을 때 해당 **(x1, y1)부터 (x2, y2)까지의 합**을 출력

### 풀이
1. `graph[][]`에는 해당 칸의 입력값을 넣고 `dp[][]`에는 칸의 합산을 넣는다.
2. `dp[][]`의 칸의 합산은 (0, 0)에서 (r, c) 좌표까지의 각 수의 합을 (r, c) 좌표에 입력하는 것이다.
3. dp의 칸에 들어갈 공식은 `graph[][]`의 좌표와 `dp`의 좌표에서 바로 위와 왼쪽 수를 합하고, 대각선 위 왼쪽을 뺀다.
    - `graph[i][j] + dp[i-1][j] + dp[i][j-1] - dp[i-1][j-1]`
    - _`dp[i-1][j-1]`을 빼는 이유는 `dp[i-1][j]`와 `dp[i][j-1]`을 앞에서 더하는데 이 때 그 내부적으로 `dp[i-1][j-1]`이 각각 존재하여, 중복으로 합산이 되므로 이를 1번 뺀다._
4. 위 과정을 마치면 `dp`배열에는 (0, 0)에서 각 좌표까지의 각 칸의 합산이 저장
5. (x1, y1)부터 (x2, y2)까지의 칸의 합산은 먼저 `dp[][]`에서 `x2`, `y2`칸의 값을 구한다.
6. 그러고, `dp[y2][x1-1]`, `dp[y1-1][x2]`을 5번에서 구한 값에서 뺀다. 
    - _이는 (0, 0) 좌표에서 (x2, y2) 까지의 합에서 (x1-1, y2)까지의 합을 빼고 또 (x2, y1-1) 까지의 합을 뺀 것이다._
7. 다만, 이렇게 빼면은 `dp[][]`에서 (x1-1, y1-1) 까지의 합을 2번 뺀 것이므로 1번만 뺸 것처럼 하기 위해 `dp[x-1][y-1]` 값을 더한다.
8. 최종적으로, (x1, y1) 부터 (x2, y2) 까지의 각 칸의 합산을 구할 수 있다.

### 핵심 코드

<details>
<summary>코드 보기</summary>

```cpp
void input() {
    cin >> n >> m;
    for(int i = 1; i <= n; i++) {
        for(int j = 1; j <= n; j++) {
            cin >> graph[i][j];
            dp[i][j] = graph[i][j] + dp[i-1][j] + dp[i][j-1] - dp[i-1][j-1];
        }
    }
    // debugging();
}

void solve() {
    int x1, x2, y1, y2;
    while(m--) {
        cin >> y1 >> x1 >> y2 >> x2;
        cout << dp[y2][x2] - dp[y1-1][x2] - dp[y2][x1-1] + dp[y1-1][x1-1] << "\n";
    }
}
```
- `graph`와 `dp`를 모든 값이 0으로 초기화
- 반복문의 시작 값을 1로 설정한다. `i`와 `j`에서 1을 뺀 값이 0인데 dp의 0의 좌표는 어차피 값이 0이므로 상관없다.
- `dp[][]`은 (0, 0) 부터 해당 칸까지의 합을 넣으므로 자기자신 위치값과 `dp`의 위, 왼쪽 좌표 값을 더하고 대각선 왼쪽 위 값을 뺸다.
- `x1`, `x2`, `y1`, `y2`의 입력받을 수 있는 자료형을 선언하고 값을 저장
- `dp[x2][y2]` 값에서 (x1, y1) 까지의 값을 구해서 빼는 것이므로 `dp[][]`을 구하는 방식의 반대로 하면은 어렵지 않게 구할 수 있다.
- 따라서, 이 값을 출력하면은 정답

</details>

### 후기
- `graph`에서 해당 칸 까지 합을 구하려면 자기자신과 왼쪽과 위의 칸을 더하면 되는 것까지 생각했으나 대각선 왼쪽 위값이 중복으로 더해진다는 것을 생각하진 못했다..
- `dp[][]`까지 구했다면 임의의 (x1, y1)부터 (x2, y2)까지의 합은 따지고 보면 `dp[][]`을 구하는 것에 반대 되는 식인 것 같다.
- `x1`, `y1`, `x2`, `y2` 순으로 입력할 줄 알았지만, 실상 `y1`, `x1`, `y2`, `x2` 값으로 입력받는 것을 알았을 떄 짜증났다.