### 2504번: 괄호의 값

1. **문제 사이트** : [바로가기](https://www.acmicpc.net/problem/2504)
2. **도움 블로그** : https://eunsolsblog.tistory.com/entry/C-%EB%B0%B1%EC%A4%80-2504%EB%B2%88-%EA%B4%84%ED%98%B8%EC%9D%98-%EA%B0%92

**문제 조건**
- 4개의 기호 '(', ')', '[', ']' 를 이용해서 만들어지는 괄호열 중에서 **올바른 괄호열**은 다음과 같이 정의
    - 한 쌍의 괄호로만 이루어진 '()', '[]'는 올바른 괄호열
    - 만일 x가 올바른 괄호열이면 '(x)', 이나 '[x]'도 모두 올바른 괄호열
    - x와 y 모두 올바른 괄호열이라면 이를 결합한 xy도 올바른 괄호열
- 어떤 올바른 괄호열 x에 대해서 그 괄호열의 값을 아래와 같이 **정의**하고 값(x)로 표시
    - '()'인 괄호열의 값은 2, '[]'인 괄호열의 값은 3
    - '(x)'의 괄호값은 _2 * x_ 로 계산하며 마찬가지로, '[x]'의 괄호값은 _3 * x_ 로 계산
    - 올바른 괄호열 x와 y가 결합된 _xy_ 의 괄호값은 _x + y_ 로 계산

**출력**  
- **괄호열의 값**을 나타내는 정수를 출력
- 만일 입력이 **올바르지 못한 괄호열**이면 반드시 0을 출력

### 풀이
1. 숫자의 곱셈을 **분배법칙**을 사용하며 스택 방법으로 구현
2. 임의의 변수를 1로 저장한 후, '(', '['의 문자열이 들어왔을 때 변수에 각각 2, 3을 곱함
3. 진행하다가 닫은 괄호인 ')', ']' 가 나오면은 이전 괄호가 서로 맞는 괄호인지 확인하여 맞을 경우, 결과값에 현재 변수의 값을 합함.
4. 만일 서로 맞지 않을 경우, 괄호가 틀린 것이므로 진행을 종료하고, 0을 출력
5. 위 과정을 해서 올바르게 진행되며 스택에도 남아있는 괄호가 없을 경우 **합산된 결과값**을 출력
6. 진행이 다 끝났는데도, 스택에 괄호가 **남아있을 경우** 잘못된 것이므로 0을 출력

### 핵심 코드

<details>
<summary>코드 보기</summary>

```py
def solve():
    ans, tmp = 0, 1
    pre = ' '
    for c in pare:
        if c == '(':
            st.append(c)
            tmp *= 2
        elif c == '[':
            st.append(c)
            tmp *= 3
        elif c == ')':
            if not st or st[-1] == '[':
                ans = 0
                break
            
            st.pop()
            
            if pre == '(':
                ans += tmp
            tmp //= 2
            
        elif c == ']':
            if not st or st[-1] == '(':
                ans = 0
                break
            
            st.pop()
            
            if pre == '[':
                ans += tmp
            tmp //= 3
        
        pre = c
    
    print(ans if not st else 0)
```
- 최종적인 결과값인 `ans`, 분배법칙으로 곱셈 값을 나타낼 `tmp`
- 진행하면서 이전 괄호를 살펴볼 `pre`
- 열린 괄호인 '(', '['일 경우 `tmp`에 각각 2, 3을 곱하고 스택(`st`)에 추가
- 닫힌 괄호인 ')', ']'일 경우 `tmp`을 `ans`에 합산 하고 각각 2, 3으로 나누고 스택 최상단 값을 뺌
- 만일, 닫힌 괄호일 때 `pre`와 서로 올바른 괄호가 아닐 경우 틀린 수식이 되므로, 진행을 종료하여 `ans`를 0으로 초기화
- 모든 진행이 끝난 후, `st`에 아무것도 없으면은 올바른 괄호열이므로 최종값인 `ans`값을 출력하고, 남아있을 경우 틀린 괄호열이므로 0을 출력

</details>

### 후기
- 